<!DOCTYPE HTML>
<html>
  <head>
    <title>Sun Rise</title>

      <script src="events.js">
      </script>

    <script type="text/javascript">
var latG = 0;
var longG = 0;
var ecliptic = 23.44*Math.PI/180;
var dataNew = new Array();

window.onload = function(){
//tryTrig();
tryData();

}

function calculate(){
  var dec = 1*document.getElementById("boxDec").value;
  var ra = 1*document.getElementById("boxRA").value;
  dec = dec/180*Math.PI;
  ra = ra/180*Math.PI;
  eq2ec(ra, dec);
}


function eq2ec(R, d){
var rA = R;
var dec = d;
var lat = 0;
var long = 0;

var lat0 = (Math.cos(dec)*Math.sin(ecliptic)*Math.sin(rA))
lat = Math.asin(Math.sin(dec)*Math.cos(ecliptic) - lat0);

var num = Math.cos(dec)*Math.cos(rA);
var den = Math.cos(lat);

if(den!=0){
long = Math.acos(num/den);}
else{
  long = 0;
}
var latD = lat*180/Math.PI;
var longD = long*180/Math.PI;
latD = Math.round(latD*100)/100;
longD = Math.round(longD*100)/100;
ansText = "lat = "+latD+" long = "+longD;
document.getElementById("text").innerHTML = ""+ansText;
}

function eq2ec2(R, d, i){
var rA = 1*R;
var dec = 1*d;
var lat = 0;
var long = 0;
var index = 1*i;
dec = dec/180*Math.PI;
rA = rA/180*Math.PI;

var lat0 = (Math.cos(dec)*Math.sin(ecliptic)*Math.sin(rA));
lat = Math.asin(Math.sin(dec)*Math.cos(ecliptic) - lat0);

var num = Math.cos(dec)*Math.cos(rA);
var den = Math.cos(lat);

if(den!=0){
long = Math.acos(num/den);
if(rA>Math.PI){long=2*Math.PI-long}
}
else{
  long = 0;
}
var latD = lat*180/Math.PI;
var longD = long*180/Math.PI;
latD = Math.round(latD*100)/100;
longD = Math.round(longD*100)/100;
ansText = "lat = "+latD+" long = "+longD;
dataNew[index] = latD;
dataNew[index+1] = longD;
}

function tryTrig(){
  var text2 = "<table>";
  for(i=0; i<16; i++){
    var angle = Math.PI/8*i;
    var degreeA = 22.5*i;
    text2 = text2+"<tr><td> angle = "+degreeA+"</td>";
    var sinA = Math.sin(angle);
    sinA = Math.round(sinA*100)/100;
    var cosA = Math.cos(angle);
    cosA = Math.round(cosA*100)/100;
    var tanA = Math.tan(angle);
    tanA = Math.round(tanA*100)/100;
    text2 = text2 +"<td> sin = "+ sinA+ "</td><td> cos = "+cosA + "</td><td> tan = "+tanA +"</td></tr>";
    }
  text2 = text2+"</table>"
document.getElementById("text2").innerHTML = ""+text2;

}

function tryData(){
  var data = [6.56, 2.84, 35.2,	14.03,
64.67,	21.4, 82.15,	23.24,
89.43,	23.44, 96.71,	23.29, 127.12,	19.08,
147.68,	10.43, 184.32,	-1.87, 212.13,	-12.98, 243.70,	-21.24,
276.65,	-23.3, 310.35,	-18.28, 340.85,	-8.09]

for(i=0;i<data.length;i=i+2){
  var adata = data[i];
  var bdata = data[i+1];
  eq2ec2(adata, bdata, i);
}

  var text2 = "<table> <tr><td>Results</td></tr>";
  for(j=0; j<data.length; j=j+2){
    text2 = text2 +"<td> RA = "+ data[j]+ "</td><td> dec = "+data[j+1] + ";</td><td> lat = "+ dataNew[j]+ "</td><td> long = "+dataNew[j+1] + "</td></tr>";
    }
  text2 = text2+"</table>"
document.getElementById("text2").innerHTML = ""+text2;


}
</script>

</head>
<body>
  <!--def equatorial_to_ecliptic(right_ascension, declination):
ra, dec = hms_to_dd(right_ascension), dms_to_dd(declination)

ec_latitude = np.arcsin(np.sin(dec) * np.cos(_ecliptic)
ec_latitude = ec_latitude - (np.cos(dec) * np.sin(_ecliptic) * np.sin(ra)))

_num, _den = np.sin(ra) * np.cos(_ecliptic) + np.tan(dec) * np.sin(_ecliptic), np.cos(ra)
ec_longitude = np.arcsin(_num / _den)

ec_latitude, ec_longitude = np.degrees([ec_latitude, ec_longitude])

return dd_to_dms(ec_latitude), dd_to_dms(ec_longitude)-->
<p></p>

<p id="text">xx</p>

<p><textarea id="boxDec" style="width: 4em;">dms</textarea> <input type="button" id="stepsButton" value="input Dec"  onClick="calculate()"></p>

<p><textarea id="boxRA" style="width: 4em;">dms</textarea> <input type="button" id="stepsButton" value="input RA"  onClick="calculate()"></p>

<p id="text2">xx</p>
</body>
</html>
